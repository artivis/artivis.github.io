<!doctype html><!-- This site was created with Hugo Blox. https://hugoblox.com --><!-- Last Published: April 19, 2024 --><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 5.9.7"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><script src=/js/mathjax-config.js></script><link rel=stylesheet href=/css/vendor-bundle.min.26c458e6907dc03073573976b7f4044e.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous media=print onload='this.media="all"'><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=stylesheet href=/css/wowchemy.140328149f1241122bc1de776a5ae522.css><link rel=stylesheet href=/css/libs/chroma/github-light.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/github-dark.min.css title=hl-dark media=print onload='this.media="all"' disabled><script async src="https://www.googletagmanager.com/gtag/js?id=G-3HDCJG0J2J"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function trackOutboundLink(e,t){gtag("event","click",{event_category:"outbound",event_label:e,transport_type:"beacon",event_callback:function(){t!=="_blank"&&(document.location=e)}}),console.debug("Outbound link clicked: "+e)}function onClickCallback(e){if(e.target.tagName!=="A"||e.target.host===window.location.host)return;trackOutboundLink(e.target,e.target.getAttribute("target"))}gtag("js",new Date),gtag("config","G-3HDCJG0J2J",{anonymize_ip:!0}),gtag("set",{cookie_flags:"SameSite=None;Secure"}),document.addEventListener("click",onClickCallback,!1)</script><meta name=author content="J√©r√©mie Deray"><meta name=description content="In this post, we will see how to launch a Linux container that is isolated, not only from other containers, but also from the local network. The container will however have access to internet."><link rel=alternate hreflang=en href=https://artivis.github.io/post/2024/lxc-isolated/><link rel=canonical href=https://artivis.github.io/post/2024/lxc-isolated/><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#1565c0"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://artivis.github.io/media/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_512x512_fill_lanczos_center_3.png"><meta property="og:type" content="article"><meta property="og:site_name" content="Home to artivis"><meta property="og:url" content="https://artivis.github.io/post/2024/lxc-isolated/"><meta property="og:title" content="How to isolate an LXC | Home to artivis"><meta property="og:description" content="In this post, we will see how to launch a Linux container that is isolated, not only from other containers, but also from the local network. The container will however have access to internet."><meta property="og:image" content="https://artivis.github.io/media/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_512x512_fill_lanczos_center_3.png"><meta property="og:locale" content="en"><meta property="article:published_time" content="2024-04-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-18T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://artivis.github.io/post/2024/lxc-isolated/"},"headline":"How to isolate an LXC","datePublished":"2024-04-18T00:00:00Z","dateModified":"2024-04-18T00:00:00Z","author":{"@type":"Person","name":"J√©r√©mie Deray"},"publisher":{"@type":"Organization","name":"Home to artivis","logo":{"@type":"ImageObject","url":"https://artivis.github.io/media/icon_hud2d1771ce140e1d1fd4d0e59d51cebc4_11712_192x192_fill_lanczos_center_3.png"}},"description":"In this post, we will see how to launch a Linux container that is isolated, not only from other containers, but also from the local network. The container will however have access to internet."}</script><script src=https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.js integrity="sha512-yXXqOFjdjHNH1GND+1EO0jbvvebABpzGKD66djnUfiKlYME5HGMUJHoCaeE4D5PTG2YsSJf6dwqyUUvQvS0vaA==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.css integrity="sha512-LQ97camar/lOliT/MqjcQs5kWgy6Qz/cCRzzRzUCfv0fotsCTC9ZHXaPQmJV8Xu/PVALfJZ7BDezl5lW3/qBxg==" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#1565c0",text:"rgb(255, 255, 255)"},button:{background:"rgb(255, 255, 255)",text:"#1565c0"}},theme:"classic",content:{message:"This website uses cookies to ensure you get the best experience on our website.",dismiss:"Got it!",link:"Learn more",href:"https://www.cookiesandyou.com"}})})</script><title>How to isolate an LXC | Home to artivis</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=6136e2fc54d92c3ed75f417e1c4ccfbe><script src=/js/wowchemy-init.min.2cadea5a50079c63724e95d3dac5110a.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor style=animation-duration:2s></span></div></a></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Home to artivis</a></div><div class="navbar-collapse main-menu-item collapse justify-content-end" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class="nav-link active" href=/post><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/tag><span>Tags</span></a></li><li class=nav-item><a class=nav-link href=/publication><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/about><span>About</span></a></li><li class=nav-item><a class=nav-link href=/contact><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item>|</li><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-adjust" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span>
</a><a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span>
</a><a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="d-none d-xl-block col-xl-2 docs-toc"><div class=top-toc><a href=#>Contents</a></div><nav id=TableOfContents><ul><li><a href=#create-a-dedicated-network>Create a dedicated network</a></li><li><a href=#setting-up-some-containers>Setting up some containers</a></li><li><a href=#intra-net-isolation>Intra-net isolation</a></li><li><a href=#inter-net-isolation>Inter-net isolation</a></li><li><a href=#isolate-an-existing-container>Isolate an existing container</a><ul><li><a href=#attach-the-isolated-network>Attach the isolated network</a></li><li><a href=#detach-the-initial-network>Detach the initial network</a></li><li><a href=#is-it-isolated-yet>Is it isolated yet?</a></li></ul></li><li><a href=#a-note-on-docker>A note on Docker</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div><main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class="article-container pt-3"><h1>How to isolate an LXC</h1><p class=page-subtitle>On providing a remote sandbox</p><div class=article-metadata><span class=article-date>Apr 18, 2024
</span><span class=middot-divider></span>
<span class=article-reading-time>10 min read</span></div></div><div class=article-container><div class=article-style><p>In this post, we will see how to launch a Linux container that is isolated,
not only from other containers,
but also from the local network.
The container will however have access to internet.</p><p>Such sandboxed environment can come handy for many use cases.
For instance, I found myself in need to provide access to a development environment
running on a beefy machine of mine to a remote colleague.</p><p>While there are many ways to do this,
we will details here a setup that is fairly simple, straightforward and fully managed by LXD.
Most importantly, we won&rsquo;t have to deal with iptables.
However, not that it may not be suitable for complex setup,
nor does it scale well.</p><p>To follow along, we&rsquo;ll assume that you have <a href=https://documentation.ubuntu.com/lxd/to/latest/installing/ target=_blank rel=noopener>LXD installed</a>,
and some basic experience with it.
Let us dive in.</p><h2 id=create-a-dedicated-network>Create a dedicated network</h2><p>LXC comes with powerful features when it comes to networking.
They may even be a little overwhelming to networking beginners such as myself.
Hence this post for futur reference.</p><p>First thing first, let us create a container using the default network,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc launch ubuntu:22.04 c0
</span></span></code></pre></div><p>Let us check that the container is up,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc list
</span></span><span class=line><span class=cl>+------+---------+----------------------+----------------------------------------------+-----------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> NAME <span class=p>|</span>  STATE  <span class=p>|</span>         IPV4         <span class=p>|</span>                     IPV6                     <span class=p>|</span>   TYPE    <span class=p>|</span> SNAPSHOTS <span class=p>|</span>
</span></span><span class=line><span class=cl>+------+---------+----------------------+----------------------------------------------+-----------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> c0   <span class=p>|</span> RUNNING <span class=p>|</span> 10.69.141.197 <span class=o>(</span>eth0<span class=o>)</span> <span class=p>|</span> fd42:3bb:147e:3c99:216:3eff:fe4a:bd59 <span class=o>(</span>eth0<span class=o>)</span> <span class=p>|</span> CONTAINER <span class=p>|</span> <span class=m>0</span>         <span class=p>|</span>
</span></span><span class=line><span class=cl>+------+---------+----------------------+----------------------------------------------+-----------+-----------+
</span></span></code></pre></div><p>Looking at the existing network,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc network list
</span></span><span class=line><span class=cl>+--------+----------+---------+----------------+--------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span>  NAME  <span class=p>|</span>   TYPE   <span class=p>|</span> MANAGED <span class=p>|</span>      IPV4      <span class=p>|</span>           IPV6           <span class=p>|</span> DESCRIPTION <span class=p>|</span> USED BY <span class=p>|</span>  STATE  <span class=p>|</span>
</span></span><span class=line><span class=cl>+--------+----------+---------+----------------+--------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span> ens3   <span class=p>|</span> physical <span class=p>|</span> NO      <span class=p>|</span>                <span class=p>|</span>                          <span class=p>|</span>             <span class=p>|</span> <span class=m>0</span>       <span class=p>|</span>         <span class=p>|</span>
</span></span><span class=line><span class=cl>+--------+----------+---------+----------------+--------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span> lxdbr0 <span class=p>|</span> bridge   <span class=p>|</span> YES     <span class=p>|</span> 10.69.141.1/24 <span class=p>|</span> fd42:3bb:147e:3c99::1/64 <span class=p>|</span>             <span class=p>|</span> <span class=m>2</span>       <span class=p>|</span> CREATED <span class=p>|</span>
</span></span><span class=line><span class=cl>+--------+----------+---------+----------------+--------------------------+-------------+---------+---------+
</span></span></code></pre></div><p>we can see that the container ip address is in the ip range of the <code>lxdbr0</code> network.</p><p>Alright, we&rsquo;ll keep this container aside for now and we will now create an LXD network dedicated to isolation.</p><p>To do so, issue the following,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network create lxdbriso
</span></span></code></pre></div><p>This will create a new bridge called <code>lxdbriso</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc network list
</span></span><span class=line><span class=cl>+----------+----------+---------+----------------+---------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span>   NAME   <span class=p>|</span>   TYPE   <span class=p>|</span> MANAGED <span class=p>|</span>      IPV4      <span class=p>|</span>           IPV6            <span class=p>|</span> DESCRIPTION <span class=p>|</span> USED BY <span class=p>|</span>  STATE  <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+----------+---------+----------------+---------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span> ens3     <span class=p>|</span> physical <span class=p>|</span> NO      <span class=p>|</span>                <span class=p>|</span>                           <span class=p>|</span>             <span class=p>|</span> <span class=m>0</span>       <span class=p>|</span>         <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+----------+---------+----------------+---------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span> lxdbr0   <span class=p>|</span> bridge   <span class=p>|</span> YES     <span class=p>|</span> 10.69.141.1/24 <span class=p>|</span> fd42:3bb:147e:3c99::1/64  <span class=p>|</span>             <span class=p>|</span> <span class=m>2</span>       <span class=p>|</span> CREATED <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+----------+---------+----------------+---------------------------+-------------+---------+---------+
</span></span><span class=line><span class=cl><span class=p>|</span> lxdbriso <span class=p>|</span> bridge   <span class=p>|</span> YES     <span class=p>|</span> 10.75.204.1/24 <span class=p>|</span> fd42:4bb8:a4e4:9d16::1/64 <span class=p>|</span>             <span class=p>|</span> <span class=m>0</span>       <span class=p>|</span> CREATED <span class=p>|</span>
</span></span><span class=line><span class=cl>+----------+----------+---------+----------------+---------------------------+-------------+---------+---------+
</span></span></code></pre></div><p>We can note that <code>lxdbriso</code> has a different range than <code>lxdbr0</code>.
It is indeed a different network.</p><h2 id=setting-up-some-containers>Setting up some containers</h2><p>At this point we can already launch a couple containers using the new network.
This will help us make sure that our setup progresses properly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc launch ubuntu:22.04 c1 -n lxdbriso
</span></span><span class=line><span class=cl>lxc launch ubuntu:22.04 c2 -n lxdbriso
</span></span></code></pre></div><p>After launching the 2 containers we can list all containers again,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc list
</span></span><span class=line><span class=cl>+------+---------+----------------------+-----------------------------------------------+-----------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> NAME <span class=p>|</span>  STATE  <span class=p>|</span>         IPV4         <span class=p>|</span>                     IPV6                      <span class=p>|</span>   TYPE    <span class=p>|</span> SNAPSHOTS <span class=p>|</span>
</span></span><span class=line><span class=cl>+------+---------+----------------------+-----------------------------------------------+-----------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> c1   <span class=p>|</span> RUNNING <span class=p>|</span> 10.75.204.192 <span class=o>(</span>eth0<span class=o>)</span> <span class=p>|</span> fd42:4bb8:a4e4:9d16:216:3eff:feac:1eea <span class=o>(</span>eth0<span class=o>)</span> <span class=p>|</span> CONTAINER <span class=p>|</span> <span class=m>0</span>         <span class=p>|</span>
</span></span><span class=line><span class=cl>+------+---------+----------------------+-----------------------------------------------+-----------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> c2   <span class=p>|</span> RUNNING <span class=p>|</span> 10.75.204.31 <span class=o>(</span>eth0<span class=o>)</span>  <span class=p>|</span> fd42:4bb8:a4e4:9d16:216:3eff:fe40:5823 <span class=o>(</span>eth0<span class=o>)</span> <span class=p>|</span> CONTAINER <span class=p>|</span> <span class=m>0</span>         <span class=p>|</span>
</span></span><span class=line><span class=cl>+------+---------+----------------------+-----------------------------------------------+-----------+-----------+
</span></span><span class=line><span class=cl><span class=p>|</span> c0   <span class=p>|</span> RUNNING <span class=p>|</span> 10.69.141.197 <span class=o>(</span>eth0<span class=o>)</span> <span class=p>|</span> fd42:3bb:147e:3c99:216:3eff:fe4a:bd59 <span class=o>(</span>eth0<span class=o>)</span>  <span class=p>|</span> CONTAINER <span class=p>|</span> <span class=m>0</span>         <span class=p>|</span>
</span></span><span class=line><span class=cl>+------+---------+----------------------+-----------------------------------------------+-----------+-----------+
</span></span></code></pre></div><p>and verify that <code>c1</code> & <code>c2</code> are on the <code>lxdbriso</code> network.</p><p>At this point, there is no isolation. You should thus be able to ping in any direction,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping c2 -4 -c1
</span></span><span class=line><span class=cl>PING  <span class=o>(</span>10.75.204.31<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from c2.lxd <span class=o>(</span>10.75.204.31<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>64</span> <span class=nv>time</span><span class=o>=</span>0.040 ms
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping 10.69.141.197 -4 -c1
</span></span><span class=line><span class=cl>PING 10.69.141.197 <span class=o>(</span>10.69.141.197<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.69.141.197: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span>0.075 ms
</span></span></code></pre></div><h2 id=intra-net-isolation>Intra-net isolation</h2><p>To isolate the two containers on the isolated network from each other,
we can use the <a href=https://documentation.ubuntu.com/lxd/en/latest/reference/devices_nic/#device-nic-bridged-device-conf:security.port_isolation target=_blank rel=noopener><code>port-isolation</code></a> feature:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc config device <span class=nb>set</span> c1 eth0 security.port_isolation<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>lxc config device <span class=nb>set</span> c2 eth0 security.port_isolation<span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><p>We shouldn&rsquo;t be able to ping from one to the other anymore,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping c2 -4 -c1
</span></span><span class=line><span class=cl>PING  <span class=o>(</span>10.75.204.31<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl>From c1.lxd <span class=o>(</span>10.75.204.192<span class=o>)</span> <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> Destination Host Unreachable
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>This worked well.</p><blockquote><p>It is important to note that while very handy,
the <code>port_isolation</code> feature solely
&ldquo;<em>prevent the NIC from communicating with other NICs in the network that have port isolation enabled</em>&rdquo;.
Mind that a container may have several NICs,
and that the feature would have to be enable for each new container since it works
at a NIC level and not at a network level.</p></blockquote><p>The intra-network isolation is in place.
Let&rsquo;s now look at inter-network isolation.</p><p>First, for good measure, let make sure we can still ping the container on the default network,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping 10.69.141.197 -4 -c1
</span></span><span class=line><span class=cl>PING 10.69.141.197 <span class=o>(</span>10.69.141.197<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.69.141.197: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span>0.076 ms
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>Yup, still there.</p><h2 id=inter-net-isolation>Inter-net isolation</h2><p>To tackle the inter-network isolation we will use the <a href=https://documentation.ubuntu.com/lxd/en/latest/howto/network_acls/ target=_blank rel=noopener>Access Control List (ACL)</a> feature.</p><p>First we will set the default rule for all egress/ingress traffic,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network <span class=nb>set</span> lxdbriso <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  security.acls.default.egress.action<span class=o>=</span>allow <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  security.acls.default.ingress.action<span class=o>=</span>allow
</span></span></code></pre></div><p>This essentially allow all traffic to/from our isolated network.
I know what you thinking, but let us keep going.</p><p>Next, we will create an ACL set of rules to actually isolate the network.
Create the ACL with,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network acl create external-only
</span></span></code></pre></div><p>We can now create the first rule,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network acl rule add external-only egress <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=nv>destination</span><span class=o>=</span>10.69.141.0/24 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=nv>action</span><span class=o>=</span>reject
</span></span></code></pre></div><p>This rule specifies that all traffic at destination of <code>lxdbr0</code> should be blocked.
The second rule is very similar and will block all traffic going to our local network.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network acl rule add external-only egress <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=nv>destination</span><span class=o>=</span>10.0.0.0/24 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=nv>action</span><span class=o>=</span>reject
</span></span></code></pre></div><p>Note that you should replace <code>10.0.0.0</code> with your actual local network.
And of course more rules can be added if you need it.</p><p>With the ACL defined, we shall now apply it to our network,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network <span class=nb>set</span> lxdbriso security.acls<span class=o>=</span>external-only
</span></span></code></pre></div><p>Alright, let us try again to ping the container on the default network,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping 10.69.141.197 -4 -c1
</span></span><span class=line><span class=cl>PING 10.69.141.197 <span class=o>(</span>10.69.141.197<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl>From 10.75.204.1 <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> Destination Port Unreachable
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>And the traffic is indeed blocked.
What about the local network,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping 10.0.0.145 -4 -c1
</span></span><span class=line><span class=cl>PING 10.0.0.145 <span class=o>(</span>10.69.141.197<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl>From 10.75.204.1 <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> Destination Port Unreachable
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>Blocked as well. Note that here <code>10.0.0.145</code> is the ip of my host on the local network.
Replace it with you own.</p><p>At last, let&rsquo;s check that that we can still ping the world,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c1 -- ping www.wikipedia.com -4 -c1
</span></span><span class=line><span class=cl>PING ncredir-lb.wikimedia.org <span class=o>(</span>185.15.58.226<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from ncredir-lb.drmrs.wikimedia.org <span class=o>(</span>185.15.58.226<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>53</span> <span class=nv>time</span><span class=o>=</span>75.8 ms
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>Looks like we&rsquo;re all set.</p><h2 id=isolate-an-existing-container>Isolate an existing container</h2><p>This is all nice and shiny but what if you have an existing container on the default
network that you&rsquo;d like to isolate?
Well worry not we can do that.</p><h3 id=attach-the-isolated-network>Attach the isolated network</h3><p>First, we have have to attach the isolated network to the container we would like to isolate,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network attach lxdbriso c0 eth1
</span></span></code></pre></div><p>Let&rsquo;s check that the nic is properly attached,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> foo -- ip a
</span></span><span class=line><span class=cl>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class=m>65536</span> qdisc noqueue state UNKNOWN group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span class=line><span class=cl>    inet 127.0.0.1/8 scope host lo
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 ::1/128 scope host
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>17: eth0@if18: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1500</span> qdisc noqueue state UP group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/ether 00:16:3e:4a:bd:59 brd ff:ff:ff:ff:ff:ff link-netnsid <span class=m>0</span>
</span></span><span class=line><span class=cl>    inet 10.69.141.197/24 metric <span class=m>100</span> brd 10.69.141.255 scope global dynamic eth0
</span></span><span class=line><span class=cl>       valid_lft 3409sec preferred_lft 3409sec
</span></span><span class=line><span class=cl>    inet6 fd42:3bb:147e:3c99:216:3eff:fe4a:bd59/64 scope global mngtmpaddr noprefixroute
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 fe80::216:3eff:fe4a:bd59/64 scope link
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>19: eth1@if20: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1500</span> qdisc noqueue state UP group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/ether 00:16:3e:57:5b:25 brd ff:ff:ff:ff:ff:ff link-netnsid <span class=m>0</span>
</span></span><span class=line><span class=cl>    inet6 fd42:4bb8:a4e4:9d16:216:3eff:fe57:5b25/64 scope global dynamic mngtmpaddr
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 fe80::216:3eff:fe57:5b25/64 scope link
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft foreve
</span></span></code></pre></div><p>Indeed it appears but note that it doesn&rsquo;t have an ipv4 address yet.</p><h3 id=detach-the-initial-network>Detach the initial network</h3><p>We should now detach the initial default network.
The logic would press us to use something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network detach lxdbr0 c0 eth0
</span></span></code></pre></div><p>However we&rsquo;re greeted with the following error message: <code>Error: The specified device doesn't exist</code>.
Nice.
What happens here is that the <code>eth0</code> device is inherited from the default lxd profile.
For some reasons those are mystical beasts that requires a specific handling.
That handling is as follows,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc config device add c0 eth0 none
</span></span></code></pre></div><p>You might be tempted by a &lsquo;what the&rsquo; and I sympathise.
The explanation is that to remove a NIC inherited from a profile,
you actually have to mask it with an empty one.
That sounds like something that should be fixed right.
Anyhow, let us continue.</p><p>Our container is now attached to the isolated network.
But it still doesn&rsquo;t have an ipv4 address.
To fix that will have to edit its network configuration.</p><p>Let us shell into the container,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c0 -- sudo --login --user ubuntu
</span></span><span class=line><span class=cl>To run a <span class=nb>command</span> as administrator <span class=o>(</span>user <span class=s2>&#34;root&#34;</span><span class=o>)</span>, use <span class=s2>&#34;sudo &lt;command&gt;&#34;</span>.
</span></span><span class=line><span class=cl>See <span class=s2>&#34;man sudo_root&#34;</span> <span class=k>for</span> details.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ubuntu@c0:~$
</span></span></code></pre></div><p>and edit its netplan configuration file,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/netplan/50-cloud-init.yaml
</span></span></code></pre></div><p>where we will change the following,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>network:
</span></span><span class=line><span class=cl>    version: 2
</span></span><span class=line><span class=cl>    ethernets:
</span></span><span class=line><span class=cl><span class=gd>-        eth0:
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+        eth1:
</span></span></span><span class=line><span class=cl><span class=gi></span>            dhcp4: true
</span></span></code></pre></div><p>Save, exit and apply the new configuration,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>netplan apply
</span></span></code></pre></div><p>In retrospect, we probably could have attached the isolated network directly as <code>eth0</code> with,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc network attach lxdbriso c0 eth0
</span></span></code></pre></div><p>but where is the fun in that?</p><h3 id=is-it-isolated-yet>Is it isolated yet?</h3><p>At this point, we have to remember that the intra-net traffic is blocked on a per-NIC basis:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c0 -- ping c2 -4 -c1
</span></span><span class=line><span class=cl>PING  <span class=o>(</span>10.75.204.31<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from c2.lxd <span class=o>(</span>10.75.204.31<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>64</span> <span class=nv>time</span><span class=o>=</span>0.047 ms
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>We shall thus set enable <code>port_isolation</code> for <code>c0</code>&rsquo;s new NIC,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lxc config device <span class=nb>set</span> c0 eth1 security.port_isolation<span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><p>Let&rsquo;s check that it works,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c0 -- ping c2 -4 -c1
</span></span><span class=line><span class=cl>PING c2.lxd <span class=o>(</span>10.75.204.31<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl>From c0.lxd <span class=o>(</span>10.75.204.226<span class=o>)</span> <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> Destination Host Unreachable
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>Let&rsquo;s verify the inter-net traffic for good measure,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> c0 -- ping 10.0.0.145 -4 -c1
</span></span><span class=line><span class=cl>PING 10.0.0.145 <span class=o>(</span>10.0.0.145<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl>From 10.75.204.1 <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> Destination Port Unreachable
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>We can&rsquo;t ping the local network. What about the greater internet,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lxc <span class=nb>exec</span> foo -- ping wikipedia.com -4 -c1
</span></span><span class=line><span class=cl>PING wikipedia.com <span class=o>(</span>185.15.58.226<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from ncredir-lb.drmrs.wikimedia.org <span class=o>(</span>185.15.58.226<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>53</span> <span class=nv>time</span><span class=o>=</span>30.0 ms
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>Yep that works.</p><h2 id=a-note-on-docker>A note on Docker</h2><p>If you are not using Docker alongside LXD on the same host,
you may skip this note altogether.
If you are, well you probably already now that there is a network-related issue in having both installed.
Chance is, you&rsquo;ve already seen the <a href=https://documentation.ubuntu.com/lxd/en/latest/howto/network_bridge_firewalld/#prevent-connectivity-issues-with-lxd-and-docker target=_blank rel=noopener>related documentation</a>.</p><p>This only a reminder that if you went with the iptables solution,
you should also allow the traffic for <code>lxdbriso</code>.
Don&rsquo;t ask me why I feel the need to remind you about that.</p><h2 id=conclusion>Conclusion</h2><p>We&rsquo;ve seen in this post how we can isolate a Linux Container so that it can only reach out to internet.
As stated at the beginning of this post,
there are plenty other ways to do that, from messing around with iptables
to dedicated vlans on your fancy ethernet switch.
I went down this road as it fairly simple and fully managed through LXD.</p><p>In introduction to this post I also told you what was my initial motivation for this setup.
To provide access to a playground to a remote colleague.
But I didn&rsquo;t touch on that aspect did I?
Well that wasn&rsquo;t quite the point here but I&rsquo;ll still leave you with a clue to explore:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>snap install netbird
</span></span></code></pre></div><blockquote><p>Disclaimer: this post was only made possible thanks to the LXD&rsquo;s online documentation and forum. Most notably, it is an expanded version of <a href=https://discuss.linuxcontainers.org/t/prevent-cross-talk/14745/8 target=_blank rel=noopener>a comment</a> from <a href=https://discuss.linuxcontainers.org/u/tomp/summary target=_blank rel=noopener>Thomas Parrott</a>. Credits where they&rsquo;re due.</p></blockquote><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title><button id=goTop class=btn-top><svg class="arrow up" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="5 0 50 80"><polyline fill="none" stroke="#fff" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" points="0.375, 35.375 28.375, 0.375 58.67, 35.375"/></svg></button></a></li></ul><style>.btn-feedback{display:inline-block}.btn-feedback-negative{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class="d-print-none widget--feedback"><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><p class="feedback--response feedback--response-positive">Glad to hear it!</p><p class="feedback--response feedback--response-negative">Sorry to hear that. <a href=https://github.com/artivis/artivis.github.io/discussions/new/choose target=_blank rel=noopener>Please let me know how it can improved</a>.</p><button class="btn btn-primary mb-4 btn-feedback btn-feedback-positive">
üòç Yes
</button>
<button class="btn btn-primary mb-4 btn-feedback btn-feedback-negative">
üòï No</button></div><script>const btnYes=document.querySelector(".btn-feedback-positive"),btnNo=document.querySelector(".btn-feedback-negative"),responseYes=document.querySelector(".feedback--response-positive"),responseNo=document.querySelector(".feedback--response-negative"),disableButtons=()=>{btnYes.disabled=!0,btnNo.disabled=!0},sendFeedback=e=>{if(typeof gtag!="function")return;gtag("event","click",{event_category:"page_rating",event_label:window.location.pathname,value:e,transport_type:"beacon",event_callback:function(){console.debug(`‚úÖ Feedback sent ${e}`)}})};btnYes.addEventListener("click",()=>{console.debug("Feedback response: üòç"),responseYes.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),btnNo.addEventListener("click",()=>{console.debug("Feedback response: üò°"),responseNo.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script></div><p class=edit-page><a href=https://github.com/artivis/artivis.github.io/edit/main/content/post/2024/lxc-isolated.md><i class="fas fa-pen pr-2"></i>Edit this page</a></p><div class=article-tags><a class="badge badge-light" href=/tag/tutorial/>Tutorial</a>
<a class="badge badge-light" href=/tag/lxc/>LXC</a>
<a class="badge badge-light" href=/tag/lxd/>LXD</a></div><div class=share-box><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fartivis.github.io%2Fpost%2F2024%2Flxc-isolated%2F&amp;text=How+to+isolate+an+LXC" target=_blank rel=noopener class=share-btn-twitter aria-label=twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fartivis.github.io%2Fpost%2F2024%2Flxc-isolated%2F&amp;t=How+to+isolate+an+LXC" target=_blank rel=noopener class=share-btn-facebook aria-label=facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=How%20to%20isolate%20an%20LXC&amp;body=https%3A%2F%2Fartivis.github.io%2Fpost%2F2024%2Flxc-isolated%2F" target=_blank rel=noopener class=share-btn-email aria-label=envelope><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fartivis.github.io%2Fpost%2F2024%2Flxc-isolated%2F&amp;title=How+to+isolate+an+LXC" target=_blank rel=noopener class=share-btn-linkedin aria-label=linkedin-in><i class="fab fa-linkedin-in"></i></a></li><li><a href="whatsapp://send?text=How+to+isolate+an+LXC%20https%3A%2F%2Fartivis.github.io%2Fpost%2F2024%2Flxc-isolated%2F" target=_blank rel=noopener class=share-btn-whatsapp aria-label=whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Fartivis.github.io%2Fpost%2F2024%2Flxc-isolated%2F&amp;title=How+to+isolate+an+LXC" target=_blank rel=noopener class=share-btn-weibo aria-label=weibo><i class="fab fa-weibo"></i></a></li></ul></div><div class="article-widget content-widget-hr"><h3>Related</h3><ul><li><a href=/post/2022/ros2-humble/>Setting up ROS 2 Humble with LXD</a></li><li><a href=/post/2020/ros-foxy-install/>Get started with ROS 2 Foxy today with LXD</a></li><li><a href=/post/2020/dotfiles/>Managing dotfiles</a></li><li><a href=/post/2020/lxc/>ROS Noetic development workflow in LXC</a></li><li><a href=/post/2023/multipass_ros_blueprint/>ROS, wherever you are</a></li></ul></div></div></article></main></div></div></div><div class=page-footer><div class=container><footer class=site-footer><p class="powered-by copyright-license-text">J√©r√©mie Deray ¬© 2024. This work is licensed under
<a href=https://creativecommons.org/licenses/by-nc-nd/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-xl" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-xl" aria-hidden=true></i>
<i class="fab fa-creative-commons-nc fa-xl" aria-hidden=true></i>
<i class="fab fa-creative-commons-nd fa-xl" aria-hidden=true></i></a></p><p class=powered-by></p></footer></div></div><script src=/js/vendor-bundle.min.ff7771056d34ad9f2de2d8f6a466e748.js></script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":true}</script><script src=/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js type=module></script><script src=/en/js/wowchemy.min.7f5ebaff62ae468cff8bb3dd1337bb9b.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy
</a><a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=/js/wowchemy-publication.9c0e895144aef5a693008b5c5d450147.js type=module></script></body></html>